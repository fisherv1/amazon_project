$(function(){


<% if @emails.size == 0 -%>
  $('#modify_email_submit').attr('disabled', true);
<%- else  %>
  $('#modify_email_submit').removeAttr('disabled');
<% end -%>

  $('#email_maintenance_display_email').hide();
  $('#email_maintenance_update_options').show();
  $('#email_maintenance_search_results').show();
  $('#email_maintenance_search_results').html('<table id="email_maintenance_search_grid"></table>');

    $("#email_maintenance_search_grid").flexigrid({
        url: '/grids/email_maintenance_search_grid',
        dataType: 'json',
        colModel : [
        {
            display: 'ID',
            name : 'grid_object_id',
            width : 40,
            sortable : true,
            align: 'left'
        },

        {
            display: 'Sent To',
            name : 'field_1',
            width : 160,
            sortable : true,
            align: 'left'
        },

        {
            display: 'Subject',
            name : 'field_2',
            width : 180,
            sortable : true,
            align: 'left'
        },

        {
            display: 'Created At',
            name : 'field_3',
            width : 120,
            sortable : true,
            align: 'left'
        },
        {
            display: 'Dispatched',
            name : 'field_4',
            width : 120,
            sortable : true,
            align: 'left'
        },

        {
            display: 'To Be Removed',
            name : 'field_5',
            width : 100,
            sortable : true,
            align: 'left'
        },

        {
            display: 'Status',
            name : 'field_6',
            width : 100,
            sortable : true,
            align: 'left'
        },

        ],
        searchitems : [
        {
            display: 'Sent To',
            name : 'field_1'
        },

        {
            display: 'Subject',
            name : 'field_2'
        },

        {
            display: 'Created At',
            name : 'field_3'
        },

        {
            display: 'Dispatched',
            name : 'field_4'
        },

        {
            display: 'To Be Removed',
            name : 'field_5'
        },

        {
            display: 'Status',
            name : 'field_6'
        }


        ],
        sortname: "id",
        sortorder: "asc",
        usepager: true,
        title: 'List Emails',
        useRp: true,
        rp: 20,
        showTableToggleBtn: false,
        width: 'auto',
        height: 'auto'
    });
});

