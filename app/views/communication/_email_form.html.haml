%script{:type => "text/javascript"}
  :plain
    $(function() {
      $('.new_email_required_field').keyup(function() {
          if($('#new_email_subject').val() == null || $('#message_template_id').val() == null || $('#list_header_id').val() == '') {
              $('#new_email_submit').attr('disabled', true);
          } else {
              $('#new_email_submit').removeAttr('disabled');
          }
      });
    });
.full_container#email
  %div#email_form
    - form_for :email, nil, :url => { :action => "send_email" }, :html => {:class => 'ajax_form', :id => "send_email_form"}  do |f|
      .full_container
        %h2 Email Message
        .form_line
          .field_40
            = f.label :subject, "<span class='asterisk'>*</span>Subject"
            = f.text_field :subject, :id => "new_email_subject", :class => 'new_email_required_field'
        .form_line
          .field_80
            = f.label :subject, "<span class='asterisk'>*</span>Template"
            %select{:id => "message_template_id", :name => "message_template_id", :style => "width:250px", :class => 'new_email_required_field' }
              - @message_templates.each do |r|
                %option{:value => "#{r.id}"} #{r.name}
        .form_line
          .field_80
            = f.label :subject, "<span class='asterisk'>*</span>List"
            %select{:id => "list_header_id", :name => "list_header_id", :style => "width:250px", :class => 'new_email_required_field' }
              - @list_headers.each do |r|
                %option{:value => "#{r.id}"} #{r.name}


      = submit_tag "Submit", :id => "new_email_submit", :disabled => true

