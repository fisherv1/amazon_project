<% unless flash[:error].nil? %>
  $("#flash_message").html("<%=escape_javascript(flash[:error])%>");
  $("#flash_message").dialog( {
  modal:true,
  position: 'top',
  buttons: {

  OK: function(){

  $(this).dialog('close');
  }
  }
  });

  $('#flash_message').dialog('open');
<% else %>



  <% if @relationship.errors.empty? -%>
    $('#<%= @relationship.relationship_type.name.gsub(/ /,'_').underscore %>').append('<%= escape_javascript(render(:partial => "person", :locals => {:person => @relationship.related_person})) %>');
    $('#<%= dom_id(@related_person) %>').effect('slide', {direction:'right'});
    <% if @relationship.relationship_type.name == 'Father' || @relationship.relationship_type.name == 'Mother' -%>
      $('#siblings').replaceWith('<%= escape_javascript(render :partial => "/relationships/relationship_container", :locals => {:type => "Siblings", :relations => @source_person.siblings}) %>');

    <% end %>
    $("#new_relationship")[0].reset();
    $("#new_relationship").hide();
    $('.person_relationship_toggle_button').css("display","");
    $('.person_relationship_close').css("display","none");
    $('#relationship_hidden_tab').attr('mode','show');
  <%end%>
<% end -%>
