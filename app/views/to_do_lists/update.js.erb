<% if @to_do_list.errors.empty? -%>
$('#to_do_detail_<%= escape_javascript("#{@to_do_list.id}") %>').replaceWith('<%= escape_javascript(render(:partial =>"to_do_lists/to_do_detail", :locals => {:to_do_detail => @to_do_list})) %>');
$('#to_do_lists').html('<%= escape_javascript(render(:partial => "to_do_lists/to_do_list"))%>');
$('#to_do_mode').attr("mode","show");
<%- else %>
$("#flash_message_text").html("<%= escape_javascript(flash[:error]) %>");
$('#flash_message').dialog( {
    modal: false,
    resizable: false,
    draggable: false,
    height: "auto",
    width: "auto",
    buttons: {
      Ok: function() {
        $(this).dialog('close');
      }
    }
  });
$('#flash_message').dialog('option', 'title', 'Error');
$('#flash_message').parent().find("a").css("display","none");
$("#flash_message").parent().css('background-color','#D1DDE6');
$("#flash_message").css('background-color','#D1DDE6');
$('#flash_message').dialog('open');
<% end -%>
enable_form_after_submit_finish();