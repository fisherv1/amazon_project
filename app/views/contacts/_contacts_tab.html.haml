.container
  .header_container
    .options
      = link_to_function image_tag('close_icon.png'), :class => " person_contact_close toggle_button", :toggle_id_name => "new_contact", :style => "display:none;"
    .title
      = link_to_function image_tag('add_icon.png'), :id=>"add_contact", :class=> "person_contact_toggle_button add_icon", :toggle_id_name => "new_contact"  if (!person.nil? && !person.new_record?)
    %h1 Add Contact
    %input{:id => "contact_hidden_tab" :mode => "show", :style => "display:none"}
    =# Initially hidden new address form
    %div#new_contact{:style=>"display:none"}
      %p
        .form_line
          .field_20
            %label MetaType
            %select#select_contact_type
              = for cmt in ContactMetaMetaType.all
                %option{:value => "add_#{cmt.name.downcase}"}
                  = cmt.name
        %br{ :style=>"clear: both;"}
        
      -form_for([@person,@phone], :html => {:class => 'active contact_form ajax_form add_phone'}) do |phone|
        = render :partial => '/phones/phone_form', :locals => { :phone => phone }
        = submit_tag 'Submit'
        %br{ :style=>"clear: both;"}
        
      -form_for([@person,@email], :html => {:class => 'contact_form ajax_form add_email'}) do |email|
        = render :partial => '/emails/email_form', :locals => { :email => email }
        = submit_tag 'Submit'
        %br{:style=>"clear:both;"}

      -form_for([@person,@website], :html => {:class => 'contact_form ajax_form add_website'}) do |website|
        = render :partial => '/websites/website_form', :locals => { :website => website }
        = submit_tag 'Submit'
        %br{:style=>"clear:both;"}

    
  #contacts
    =# Render the person's contacts
    = render :partial => '/contacts/contact', :collection => @person.contacts
      